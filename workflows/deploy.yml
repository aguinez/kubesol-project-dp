# Nombre del workflow, aparecerÃ¡ en la pestaÃ±a "Actions" de GitHub
name: Test de Runner en GKE

# Eventos que disparan este workflow
on:
  # Se ejecuta cada vez que haces un 'push' a la rama principal (main/master)
  push:
    branches:
      - develop
      - main
  
  # Te permite ejecutar este workflow manualmente desde la interfaz de GitHub
  workflow_dispatch:

jobs:
  # Nombre del trabajo
  hola-mundo-gke:
    # Â¡Esta es la parte mÃ¡s importante!
    # AquÃ­ le decimos a GitHub que ejecute este trabajo en un runner que cumpla con estas etiquetas.
    # 'self-hosted' asegura que use uno de tus runners, y 'gke-runner' es la etiqueta
    # personalizada que definimos en nuestro 'RunnerDeployment.yaml'.
    runs-on: [self-hosted, gke-runner]

    steps:
      # Paso 1: Un simple saludo
      - name: Imprimir Saludo
        run: echo "Â¡Hola Mundo desde mi runner auto-hospedado en GKE! ğŸ‰"

      # Paso 2: Mostrar informaciÃ³n sobre el runner
      - name: Â¿QuiÃ©n soy?
        run: |
          echo "Este trabajo estÃ¡ corriendo en el host: $(hostname) asdasd"
          echo "El directorio de trabajo es: $PWD"